(this.webpackJsonptodos=this.webpackJsonptodos||[]).push([[0],[,,,function(e,t,n){"use strict";n.d(t,"g",(function(){return r})),n.d(t,"f",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"i",(function(){return s})),n.d(t,"j",(function(){return d})),n.d(t,"k",(function(){return f})),n.d(t,"h",(function(){return m})),n.d(t,"w",(function(){return p})),n.d(t,"x",(function(){return g})),n.d(t,"v",(function(){return b})),n.d(t,"t",(function(){return O})),n.d(t,"u",(function(){return v})),n.d(t,"s",(function(){return h})),n.d(t,"m",(function(){return _})),n.d(t,"n",(function(){return E})),n.d(t,"l",(function(){return j})),n.d(t,"p",(function(){return k})),n.d(t,"q",(function(){return w})),n.d(t,"o",(function(){return S})),n.d(t,"r",(function(){return y}));var r="CHECK_AUTH_INITIAL",a="CHECK_AUTH",o="AUTH_INITIAL",c="AUTH_START",i="AUTH_SUCCESS",u="AUTH_FAIL",l="AUTH_CLEAR_ERROR",s="LOGOUT_INITIAL",d="LOGOUT_START",f="LOGOUT_SUCCESS",m="LOGOUT_FAIL",p="TODO_FETCH_START",g="TODO_FETCH_SUCCESS",b="TODO_FETCH_FAIL",O="TODO_DELETE_START",v="TODO_DELETE_SUCCESS",h="TODO_DELETE_FAIL",_="TODO_ADD_START",E="TODO_ADD_SUCCESS",j="TODO_ADD_FAIL",k="TODO_CHECKED_START",w="TODO_CHECKED_SUCCESS",S="TODO_CHECKED_FAIL",y="TODO_CLEAR_ERROR"},,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"h",(function(){return m})),n.d(t,"k",(function(){return l})),n.d(t,"j",(function(){return u})),n.d(t,"i",(function(){return s})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return f})),n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return c})),n.d(t,"e",(function(){return i})),n.d(t,"d",(function(){return p})),n.d(t,"p",(function(){return E})),n.d(t,"o",(function(){return j})),n.d(t,"l",(function(){return k})),n.d(t,"m",(function(){return w})),n.d(t,"n",(function(){return _}));var r=n(3),a=function(){return{type:r.f}},o=function(){return{type:r.d}},c=function(e){var t=JSON.parse(localStorage.getItem("user")).token;return{type:r.e,data:e,token:t}},i=function(e){return{type:r.b,error:e}},u=function(){return{type:r.j}},l=function(){return localStorage.removeItem("user"),{type:r.k}},s=function(e){return localStorage.removeItem("user"),{type:r.h,error:e}},d=function(e,t){return{type:r.c,email:e,password:t}},f=function(){return{type:r.g}},m=function(){return{type:r.i}},p=function(){return{type:r.a}},g=n(16),b=n(17),O=n(18),v=n(20),h=new(function(){function e(){Object(g.a)(this,e)}return Object(b.a)(e,[{key:"getTodos",value:function(){return O.a.get("/todo",{headers:Object(v.a)()})}},{key:"deleteTodo",value:function(e){return O.a.delete("/todo/"+e,{headers:Object(v.a)()})}},{key:"newTodo",value:function(e){return O.a.post("/todo",{title:e},{headers:Object(v.a)()})}},{key:"checkedToggle",value:function(e){return O.a.get("/toggle_checked/"+e,{headers:Object(v.a)()})}}]),e}()),_=function(){return{type:r.r}},E=function(){return function(e){e({type:r.w}),h.getTodos().then((function(t){var n;e((n=t.data.results,{type:r.x,data:n}))})).catch((function(t){var n;e((n=t,{type:r.v,error:n}))}))}},j=function(e){return function(t){t({type:r.t}),h.deleteTodo(e).then((function(n){t(function(e){return{type:r.u,id:e}}(e))})).catch((function(e){var n;t((n=e,{type:r.s,error:n}))}))}},k=function(e){return function(t){t({type:r.m}),h.newTodo(e).then((function(e){var n;t((n=e.data.results,{type:r.n,data:n}))})).catch((function(e){var n;t((n=e,{type:r.l,error:n}))}))}},w=function(e){return function(t){t({type:r.p}),h.checkedToggle(e).then((function(n){t(function(e){return{type:r.q,id:e}}(e))})).catch((function(e){var n;t((n=e,{type:r.o,error:n}))}))}}},,,,,,,,function(e,t,n){"use strict";var r=n(67),a=n.n(r).a.create({baseURL:"https://resource-api.alfarisilab.com/api"});t.a=a},,function(e,t,n){"use strict";function r(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.token?{Authorization:"Bearer "+e.token}:{}}n.d(t,"a",(function(){return r}))},,,,,,function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(66),c=n.n(o);t.a=function(){return a.a.createElement("div",{className:c.a.Spinner})}},function(e,t,n){"use strict";var r=n(16),a=n(17),o=n(18),c=n(20),i=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,[{key:"login",value:function(e,t){return o.a.post("/login",{email:e,password:t})}},{key:"logout",value:function(){return o.a.post("/logout",{},{headers:Object(c.a)()})}},{key:"register",value:function(e){var t=e.full_name,n=e.email,r=e.password;return o.a.post("/register",{full_name:t,email:n,password:r}).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"verify",value:function(){return o.a.get("/verify",{headers:Object(c.a)()})}},{key:"getCurrentUser",value:function(){return JSON.parse(localStorage.getItem("user"))}}]),e}();t.a=new i},,function(e,t,n){e.exports={SideDrawer:"SideDrawer_SideDrawer__3kXLK",Open:"SideDrawer_Open__1tCv1",Close:"SideDrawer_Close__9j7x-"}},function(e,t,n){e.exports={Input:"Input_Input__3r5Ke",Label:"Input_Label__1qyHr",InputElement:"Input_InputElement__2m88K",Invalid:"Input_Invalid__16Mis"}},,,function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(44),c=n.n(o);t.a=function(e){return a.a.createElement("button",{disabled:e.disabled,className:[c.a.Button,c.a[e.btnType]].join(" "),onClick:e.clicked}," ",e.children," ")}},,function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(63),c=n.n(o);t.a=function(e){return e.show?a.a.createElement("div",{className:c.a.Backdrop,onClick:e.clicked}):null}},,,,function(e,t,n){e.exports={Toolbar:"Toolbar_Toolbar__ApScI",DesktopOnly:"Toolbar_DesktopOnly__LuPaL"}},function(e,t,n){e.exports={NavigationItems:"NavigationItems_NavigationItems__1fnFX"}},function(e,t,n){e.exports={NavigationItem:"NavigationItem_NavigationItem__2SpXc",active:"NavigationItem_active__2v2td"}},,,function(e,t,n){e.exports={Button:"Button_Button__3gFiX",Primary:"Button_Primary__38CGK",enable:"Button_enable__1Clcb"}},function(e,t,n){e.exports={Modal:"Modal_Modal__1-5dN",Modal_action:"Modal_Modal_action__ubIbR"}},,,,function(e,t,n){"use strict";var r=n(2),a=n(16),o=n(17),c=n(24),i=n(23),u=n(0),l=n.n(u),s=n(65),d=n.n(s),f=n(33),m=n(50),p=n(26),g=n(7),b=n(22),O=n(10),v=n(59),h=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,c=new Array(o),i=0;i<o;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={form_data:{email:{elementType:"input",elementConfig:{type:"email",placeholder:"Enter email",autoFocus:!0},label:"Email",value:"",validation:{required:!0,isEmail:!0},valid:!1,touched:!1},password:{elementType:"input",elementConfig:{type:"password",placeholder:"Enter password"},label:"Password",value:"",validation:{required:!0},valid:!1,touched:!1}},formIsValid:!1,loading:!1,errorMessage:""},e.onCheckValidity=function(e,t){var n=!0;return t.required&&(n=""!==e.trim()&&n),n},e.onChangeHandler=function(t,n){var a=Object(r.a)({},e.state.form_data),o=Object(r.a)({},a[n]);o.value=t.target.value,o.valid=e.onCheckValidity(t.target.value,o.validation),o.touched=!0,a[n]=o;var c=!0;for(var i in a)c=a[i].valid&&c;e.setState({form_data:a,formIsValid:c})},e.onSubmitHandler=function(t){t.preventDefault(),e.props.onAuthentication(e.state.form_data.email.value,e.state.form_data.password.value)},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=[];for(var n in this.state.form_data)t.push({id:n,config:this.state.form_data[n]});var r=l.a.createElement("form",{onSubmit:this.onSubmitHandler},t.map((function(t){return l.a.createElement(m.a,{key:t.id,label:t.config.label,elementType:t.config.elementType,elementConfig:t.config.elementConfig,value:t.config.value,invalid:!t.config.valid,shouldValidate:t.config.validation,touched:t.config.touched,changed:function(n){return e.onChangeHandler(n,t.id)}})})),l.a.createElement("div",{style:{textAlign:"right"}},this.props.loading?l.a.createElement("div",null," ",l.a.createElement(p.a,null)," "):l.a.createElement(f.a,{disabled:!this.state.formIsValid,btnType:"Primary"},"SUBMIT")));return l.a.createElement("div",{className:d.a.Login},l.a.createElement("h2",null,"Log in"),r,this.props.error&&l.a.createElement(v.a,{show:this.props.error,modalClosed:this.props.onAuthClearError},this.props.error.message))}}]),n}(u.Component);t.a=Object(b.b)((function(e){return{loading:e.auth.loading,error:e.auth.error}}),(function(e){return{onAuthentication:function(t,n){return e(O.a(t,n))},onAuthClearError:function(){return e(O.d())}}}))(Object(g.g)(h))},function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(30),c=n.n(o);t.a=function(e){var t=null,n=[c.a.InputElement];switch(e.invalid&&e.shouldValidate&&e.touched&&n.push(c.a.Invalid),e.elementType){case"input":t=a.a.createElement("input",Object.assign({},e.elementConfig,{value:e.value,className:n.join(" "),onChange:e.changed}));break;default:t=a.a.createElement("input",Object.assign({},e.elementConfig,{value:e.value,className:n.join(" "),onChange:e.changed}))}return a.a.createElement("div",{className:c.a.Input},a.a.createElement("label",{className:c.a.Label},e.label),t,a.a.createElement("div",{style:{textAlign:"right"}},a.a.createElement("span",{style:{color:"red"}},null)))}},,,,,,,,,function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(45),c=n.n(o),i=n(35),u=n(33);t.a=function(e){return a.a.createElement(r.Fragment,null,a.a.createElement(i.a,{show:e.show,clicked:e.modalClosed}),e.show?a.a.createElement("div",{className:c.a.Modal},e.children,a.a.createElement("div",{className:c.a.Modal_action},a.a.createElement(u.a,{clicked:e.modalClosed},"OKEY"))):null)}},,function(e,t,n){e.exports={Logo:"Logo_Logo__1N0xH"}},function(e,t,n){e.exports={DrawerToggle:"DrawerToggle_DrawerToggle__m405X"}},function(e,t,n){e.exports={Backdrop:"Backdrop_Backdrop__3j6VK"}},function(e,t,n){e.exports={Content:"Layout_Content__3H3X8"}},function(e,t,n){e.exports={Login:"Login_Login__38Sbn"}},function(e,t,n){e.exports={Spinner:"Spinner_Spinner__BWqNs"}},,,,function(e,t,n){e.exports=n(99)},,,,,function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(31),c=n.n(o),i=(n(75),n(22)),u=n(16),l=n(17),s=n(24),d=n(23),f=n(39),m=n.n(f),p=n(40),g=n.n(p),b=n(41),O=n.n(b),v=n(25),h=function(e){return a.a.createElement("li",{className:O.a.NavigationItem},a.a.createElement(v.b,{exact:!0,to:e.link,activeClassName:O.a.active},e.children))},_=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return this.props.isLogin?a.a.createElement("ul",{className:g.a.NavigationItems},a.a.createElement(h,{link:"/"}," Todo "),a.a.createElement(h,{link:"/logout"}," Logout ")):a.a.createElement("ul",{className:g.a.NavigationItems},a.a.createElement(h,{link:"/"}," Login "),a.a.createElement(h,{link:"/register"}," Register "))}}]),n}(r.Component),E=n(61),j=n.n(E),k=function(){return a.a.createElement("div",{className:j.a.Logo},a.a.createElement("div",null,"Todo's App"))},w=n(62),S=n.n(w),y=function(e){return a.a.createElement("div",{className:S.a.DrawerToggle,onClick:e.clicked},a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null))},T=function(e){return a.a.createElement("header",{className:m.a.Toolbar},a.a.createElement(y,{clicked:e.toggleHandler}),e.isShowSideDrawer?null:a.a.createElement(k,null),a.a.createElement("nav",{className:m.a.DesktopOnly},a.a.createElement(_,{isLogin:e.isLogin})))},C=n(29),L=n.n(C),D=n(35),I=function(e){var t=[L.a.SideDrawer,L.a.Close];return e.open&&(t=[L.a.SideDrawer,L.a.Open]),a.a.createElement(a.a.Fragment,null,a.a.createElement(D.a,{show:e.open,clicked:e.closed}),a.a.createElement("div",{className:t.join(" "),onClick:e.closed},a.a.createElement(k,null),a.a.createElement("nav",{style:{marginTop:"20px"}},a.a.createElement(_,{isLogin:e.isLogin}))))},x=n(64),N=n.n(x),A=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={isShowSideDrawer:!1},e.sideDrawerCloseHandler=function(){e.setState({isShowSideDrawer:!1})},e.sideDrawerToggleHandler=function(){e.setState((function(e){return{isShowSideDrawer:!e.isShowSideDrawer}}))},e}return Object(l.a)(n,[{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(T,{isLogin:this.props.isLogin,toggleHandler:this.sideDrawerToggleHandler,isShowSideDrawer:this.state.isShowSideDrawer}),a.a.createElement(I,{isLogin:this.props.isLogin,open:this.state.isShowSideDrawer,closed:this.sideDrawerCloseHandler}),a.a.createElement("main",{className:N.a.Content},this.props.children))}}]),n}(r.Component),H=n(7),U=n(49),R=n(10),B=n(26),F=Object(r.lazy)((function(){return Promise.all([n.e(6),n.e(3)]).then(n.bind(null,115))})),M=Object(r.lazy)((function(){return n.e(4).then(n.bind(null,113))})),P=Object(r.lazy)((function(){return n.e(5).then(n.bind(null,114))})),K=Object(i.b)((function(e){return{auth:e.auth}}),(function(e){return{checkAuth:function(){return e(R.c())}}}))((function(e){var t=Object(r.useCallback)((function(){e.checkAuth()}),[e]);Object(r.useEffect)(t,[]);var n=a.a.createElement(H.d,null,a.a.createElement(H.b,{path:"/",exact:!0,component:U.a}),a.a.createElement(H.b,{path:"/register",render:function(){return a.a.createElement(r.Suspense,{fallback:a.a.createElement("div",{className:"loading-bottom"},a.a.createElement(B.a,null)," ")},a.a.createElement(P,null))}}),a.a.createElement(H.a,{to:"/"}));return e.auth.isLogin&&(n=a.a.createElement(H.d,null,a.a.createElement(H.b,{path:"/",exact:!0,render:function(){return a.a.createElement(r.Suspense,{fallback:a.a.createElement("div",{className:"loading-bottom"},a.a.createElement(B.a,null)," ")},a.a.createElement(F,null))}}),a.a.createElement(H.b,{path:"/logout",render:function(){return a.a.createElement(r.Suspense,{fallback:a.a.createElement("div",{className:"loading-bottom"},a.a.createElement(B.a,null)," ")},a.a.createElement(M,null))}}),a.a.createElement(H.a,{to:"/"}))),a.a.createElement("div",null,a.a.createElement(A,{isLogin:e.auth.isLogin},n))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var V=n(19),q=n(68),X=n(69),J=n(14),G=n.n(J),z=n(9),W=n(3),Y=n(27),$=G.a.mark(ee),Q=G.a.mark(te),Z=G.a.mark(ne);function ee(e){var t;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(z.b)(R.b());case 2:return e.prev=2,e.next=5,localStorage.getItem("user");case 5:if(!e.sent){e.next=12;break}return e.next=9,Y.a.verify();case 9:return t=e.sent,e.next=12,Object(z.b)(R.g(t.data.results));case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(2),e.next=18,Object(z.b)(R.k());case 18:case"end":return e.stop()}}),$,null,[[2,14]])}function te(e){var t;return G.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(z.b)(R.f());case 2:return n.prev=2,n.next=5,Y.a.login(e.email,e.password);case 5:return t=n.sent,n.next=8,localStorage.setItem("user",JSON.stringify(t.data));case 8:return n.next=10,Object(z.b)(R.g(t.data.results));case 10:n.next=16;break;case 12:return n.prev=12,n.t0=n.catch(2),n.next=16,Object(z.b)(R.e(n.t0));case 16:case"end":return n.stop()}}),Q,null,[[2,12]])}function ne(e){var t;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(z.b)(R.j());case 3:return e.next=5,Y.a.logout();case 5:return t=e.sent,console.log(t),e.next=9,Object(z.b)(R.k());case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(0),e.next=15,Object(z.b)(R.i(e.t0));case 15:case"end":return e.stop()}}),Z,null,[[0,11]])}var re=G.a.mark(oe),ae=G.a.mark(ce);function oe(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(z.a)([Object(z.c)(W.c,te),Object(z.c)(W.g,ee),Object(z.c)(W.i,ne)]);case 2:case"end":return e.stop()}}),re)}function ce(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(z.a)([oe()]);case 2:case"end":return e.stop()}}),ae)}var ie=n(2),ue={currentUser:null,token:null,isLogin:!1,loading:!1,error:null,isPrepare:!0},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W.g:return Object(ie.a)(Object(ie.a)({},e),{},{isLogin:!0});case W.d:return Object(ie.a)(Object(ie.a)({},e),{},{loading:!0});case W.e:return Object(ie.a)(Object(ie.a)({},e),{},{loading:!1,currentUser:t.data,token:t.token,isLogin:!0,error:null,isPrepare:!1});case W.b:return Object(ie.a)(Object(ie.a)({},e),{},{currentUser:null,loading:!1,error:t.error});case W.f:var n=Y.a.getCurrentUser();return n?Object(ie.a)(Object(ie.a)({},e),{},{loading:!1}):Object(ie.a)(Object(ie.a)({},e),{},{isLogin:!1,loading:!1});case W.j:return Object(ie.a)(Object(ie.a)({},e),{},{loading:!0,isPrepare:!1});case W.k:return Object(ie.a)(Object(ie.a)({},e),{},{isLogin:!1,currentUser:null,loading:!1,isPrepare:!1});case W.h:return Object(ie.a)(Object(ie.a)({},e),{},{isLogin:!1,currentUser:null,loading:!1,error:t.error,isPrepare:!1});case W.a:return Object(ie.a)(Object(ie.a)({},e),{},{error:null});default:return e}},se=n(36),de={todos:[],loading:null,error:null},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W.w:return Object(ie.a)(Object(ie.a)({},e),{},{loading:!0,error:null});case W.x:var n=t.data.map((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{checked:"yes"===e.checked})}));return Object(ie.a)(Object(ie.a)({},e),{},{loading:!1,error:null,todos:n});case W.v:return Object(ie.a)(Object(ie.a)({},e),{},{loading:!1,error:t.error});case W.t:return Object(ie.a)(Object(ie.a)({},e),{},{error:null});case W.u:var r=Object(se.a)(e.todos),a=r.filter((function(e){return e.id!==t.id}));return Object(ie.a)(Object(ie.a)({},e),{},{loading:!1,error:null,todos:a});case W.s:return Object(ie.a)(Object(ie.a)({},e),{},{loading:!1,error:t.error});case W.m:return Object(ie.a)(Object(ie.a)({},e),{},{loading:!0,error:null});case W.n:return Object(ie.a)(Object(ie.a)({},e),{},{loading:!1,todos:[].concat(Object(se.a)(e.todos),[Object(ie.a)(Object(ie.a)({},t.data),{},{checked:!1})])});case W.l:return Object(ie.a)(Object(ie.a)({},e),{},{loading:!1,error:t.error});case W.p:return Object(ie.a)({},e);case W.q:var o=e.todos.findIndex((function(e){return e.id===t.id})),c=Object(se.a)(e.todos);return c[o]=Object(ie.a)(Object(ie.a)({},c[o]),{},{checked:!c[o].checked}),Object(ie.a)(Object(ie.a)({},e),{},{loading:!1,todos:c});case W.o:return Object(ie.a)(Object(ie.a)({},e),{},{error:t.error});case W.r:return Object(ie.a)(Object(ie.a)({},e),{},{loading:!1,error:null});default:return e}},me=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||V.d,pe=Object(V.c)({auth:le,todo:fe}),ge=Object(X.a)(),be=Object(V.e)(pe,me(Object(V.a)(q.a,ge)));ge.run(ce),c.a.render(a.a.createElement(i.a,{store:be},a.a.createElement(v.a,{basename:"/"},a.a.createElement(K,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[70,1,2]]]);
//# sourceMappingURL=main.dd4ffccd.chunk.js.map